# %% [markdown]
# # Web Mining: Pengantar dan Konsep Dasar
# 
# **Mata Kuliah**: Pencarian dan Penambangan Web: Pengantar Web Mining  
# **Dosen**: Mulaab M  
# **Program Studi**: Teknik Informatika  
# **Universitas**: Trunojoyo Madura  
# **Tahun**: 2025
# 
# ## Tujuan Pembelajaran
# 
# Setelah mengikuti mata kuliah ini, mahasiswa diharapkan mampu:
# - Memahami dan menggunakan konsep dasar serta teknologi web mining
# - Melakukan penelitian sistem informasi dalam konteks web mining
# 
# %% [markdown]
# ## Definisi dan Tantangan Web Mining
# 
# **Web Mining** adalah proses menemukan dan mengekstrak informasi dari internet menggunakan berbagai teknik penambangan data untuk menemukan pola berguna atau pengetahuan dari:
# - Struktur hiperlink web
# - Isi halaman web
# - Perilaku pengguna
# 
# **Tantangan dalam pemrosesan data Web**:
# - Web adalah pangkalan data yang sangat besar dan kompleks
# - Data dalam berbagai format (HTML, XML, teks, dll.)
# - Sifat data yang sangat dinamis
# - Bukan domain yang spesifik melainkan "segalanya"
# 
# %% [markdown]
# ## Taksonomi Web Mining
# 
# Web Mining secara umum dibagi menjadi tiga subbidang utama:
# 
# ```mermaid
# graph TD
#     A[Web Mining] --> B[Web Content Mining]
#     A --> C[Web Usage Mining]
#     A --> D[Web Structure Mining]
#     B --> E[Text Mining]
#     B --> F[Image/Audio/Video Mining]
#     C --> G[Log Analysis]
#     C --> H[Clickstream Analysis]
#     D --> I[Link Analysis]
#     D --> J[Social Network Analysis]
# ```

# %% [markdown]
# ### 1. Penambangan Isi Web (Web Content Mining)
# 
# **Fokus**: Mengekstrak informasi berguna dari konten halaman web:
# - Teks (artikel, deskripsi, komentar)
# - Gambar, audio, video
# - Data terstruktur (tabel)
# 
# **Aplikasi Text Mining** (bagian dari Content Mining):
# 
# 1. **Ekstraksi Informasi**: Mengambil informasi terstruktur dari konten web yang tidak terstruktur atau semi-terstruktur
# 2. **Klasifikasi Dokumen**: Mengkategorikan dokumen atau gambar ke dalam kelas tertentu
# 3. **Pengelompokan Konten (Content Clustering)**: Mencari kelompok dokumen berdasarkan kesamaan
# 4. **Analisis Sentimen**: Mengklasifikasikan polaritas teks (positif, netral, negatif)
# 5. **Topic modelling, peringkasan dokumen, dan ekstraksi kata kunci**
# 
# %% [markdown]
# ### 2. Penambangan Penggunaan Web (Web Usage Mining)
# 
# **Fokus**: Mengekstrak informasi dari data yang dihasilkan melalui kunjungan halaman web dan transaksi
# - Sumber data: log akses server atau cookie sisi klien
# - Fokus utama pada karakteristik pengguna dan profil penggunaan
# - Data clickstream (urutan klik pengguna)
# 
# **Proses**:
# 1. Pengumpulan data
# 2. Penggabungan data
# 3. Pembersihan data
# 4. Penstrukturan data (identifikasi pengguna, sesi, tampilan halaman, kunjungan)
# 5. Ekstraksi pengetahuan (pola penggunaan dan profil pengguna)
# 
# **Tujuan**: Meningkatkan data, situs web, dan nilai pelanggan
# 
# **Aplikasi**:
# - Rekomendasi Produk
# - Pencarian yang Dipersonalisasi
# 
# %% [markdown]
# ### 3. Penambangan Struktur Web (Web Structure Mining)
# 
# **Fokus**: Menemukan dan menginterpretasi pola dalam struktur tautan (hyperlink) di internet serta hubungan sosial antar aktor di web
# 
# **Sumber data**: Web crawls dan jaringan sosial
# 
# **Aplikasi**:
# - **Grafik Web (Web Graph)**: Representasi halaman web sebagai simpul dan hyperlink sebagai sisi
# - **Analisis Struktur Web**: Menentukan otoritas halaman (PageRank), mendeteksi komunitas online, menganalisis jaringan sosial digital
# - **Identifikasi Simpul Penting (Centrality)**: Mencari halaman penting, mengidentifikasi pengguna influencer di media sosial
# - **Deteksi Komunitas**: Menemukan himpunan simpul yang berinteraksi satu sama lain lebih sering
# 
# %% [markdown]
# ## Proses Web Mining
# 
# Proses Web Mining mirip dengan proses data mining pada umumnya, namun berbeda pada tahapan pengumpulan dan pemrosesan data.
# 
# ```mermaid
# flowchart TD
#     A[Pengumpulan dan Eksplorasi Data] --> B[Praproses dan Transformasi]
#     B --> C[Penambangan Data Aktual]
#     C --> D[Evaluasi Model]
#     D --> B
#     D --> E[Deployment]
# ```

# %% [markdown]
# ### 1. Pengumpulan dan Eksplorasi Data
# - Crawling dokumen atau pengambilan data via Web API
# - Eksplorasi data untuk memahami, meringkas statistik, dan visualisasi
# 
# ### 2. Praproses dan Transformasi
# - Mentransformasi data ke representasi yang sesuai dengan metode data mining
# - Reduksi dimensi, seleksi fitur, transformasi atribut/teks ke vektor/embedding
# - Integrasi berbagai sumber data
# - **Catatan**: Tahapan ini dapat memakan 70-80% dari total waktu proyek data mining
# 
# ### 3. Penambangan Data Aktual
# - Input: data yang telah diproses
# - Output: model atau pola
# - Melibatkan penggunaan metode data mining, evaluasi model, dan iterasi
# 
# %% [markdown]
# ## Contoh Praktis: Analisis Sentimen Sederhana
# 
# Berikut adalah contoh sederhana analisis sentimen menggunakan Python:

# %%
import pandas as pd
import numpy as np
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.naive_bayes import MultinomialNB
from sklearn.pipeline import make_pipeline
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score, classification_report

# Contoh data ulasan produk
data = {
    'text': [
        'Produk ini sangat bagus dan berkualitas tinggi',
        'Saya kecewa dengan pembelian ini, tidak sesuai harapan',
        'Cukup baik untuk harga yang dibayarkan',
        'Sangat buruk, tidak merekomendasikan produk ini',
        'Kualitas ok tapi pengiriman lambat',
        'Produk luar biasa, pasti akan beli lagi',
        'Biasa saja, tidak spesial',
        'Waste of money, jangan dibeli',
        'Sangat memuaskan, worth it untuk harganya',
        'Kurang puas dengan produknya'
    ],
    'sentiment': [
        'positive', 'negative', 'neutral', 'negative', 
        'neutral', 'positive', 'neutral', 'negative', 
        'positive', 'negative'
    ]
}

df = pd.DataFrame(data)
print("Contoh Data:")
print(df.head())

# %%
# Membuat model pipeline
model = make_pipeline(TfidfVectorizer(), MultinomialNB())

# Memisahkan data training dan testing
X_train, X_test, y_train, y_test = train_test_split(
    df['text'], df['sentiment'], test_size=0.3, random_state=42
)

# Melatih model
model.fit(X_train, y_train)

# Memprediksi
y_pred = model.predict(X_test)

# Evaluasi
print("Akurasi:", accuracy_score(y_test, y_pred))
print("\nLaporan Klasifikasi:")
print(classification_report(y_test, y_pred))

# %%
# Mencoba prediksi pada teks baru contohnya
new_texts = [
    "Saya sangat suka produk ini",
    "Ini tidak worth it dengan harganya",
    "Produk biasa saja"
]

predictions = model.predict(new_texts)
for text, pred in zip(new_texts, predictions):
    print(f"'{text}' -> Sentimen: {pred}")

# %% [markdown]
# ## Penutup
# 
# Materi ini memberikan pengantar tentang Web Mining, mencakup definisi, taksonomi, dan prosesnya. Web Mining merupakan bidang yang terus berkembang seiring dengan pertumbuhan internet dan data digital. Pemahaman yang baik tentang konsep-konsep dasar ini akan menjadi fondasi untuk penerapan dan penelitian lebih lanjut dalam bidang web mining.
# 
# **Referensi**:
# - Liu, B. (2011). Web Data Mining: Exploring Hyperlinks, Contents, and Usage Data. Springer.
# - Chakrabarti, S. (2003). Mining the Web: Statistical Analysis of Hypertext and Semi-Structured Data. Morgan Kaufmann.